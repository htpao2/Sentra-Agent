# 工具 Description 编写指南

## 核心原则

**工具的 description 应该描述"工具能做什么"（功能），而非"会返回什么"（结果）**

---

## ✅ 推荐的 Description 模式

### 1. 功能导向型

描述工具的能力和用途，而非结果的格式或内容。

**示例**：

```json
{
  "name": "image_vision_read",
  "description": "读取并描述一张或多张图片。支持图片在线链接（http/https）或本地绝对路径；结合文本提示进行识别并返回结果。支持常见图片格式包括 JPG、PNG、GIF、WebP 等。"
}
```

**优点**：
- ✅ 说明了工具能做什么（读取和描述图片）
- ✅ 说明了支持的输入格式（链接/本地路径）
- ✅ 说明了支持的文件类型
- ✅ 没有预测具体的返回内容

### 2. 目的导向型

描述工具的使用场景和目的。

**示例**：

```json
{
  "name": "realtime_search",
  "description": "Real-time web search, it enables instant access to the latest information available on the internet, helping users quickly discover, verify, and explore relevant data on any topic"
}
```

**优点**：
- ✅ 说明了工具的用途（实时搜索）
- ✅ 说明了使用场景（获取最新信息）
- ✅ 说明了价值（快速发现、验证和探索）
- ✅ 没有说"返回10条结果"或"包含标题和链接"

### 3. 能力列举型

列举工具支持的主要功能点。

**示例**：

```json
{
  "name": "fs_ops",
  "description": "文件系统操作工具。支持读取文件、写入文件、列出目录内容、创建目录、删除文件或目录等常用文件系统操作。"
}
```

**优点**：
- ✅ 列举了主要功能（读、写、列、创建、删除）
- ✅ 说明了工具的定位（文件系统操作）
- ✅ 没有预测返回的数据结构

---

## ❌ 应该避免的 Description 模式

### 1. 结果预测型

❌ **错误示例**：

```json
{
  "name": "qq_group_memberList",
  "description": "获取群成员列表，返回包含成员昵称、QQ号、群名片、加群时间等字段的数组"
}
```

**问题**：
- 预测了返回格式（数组）
- 预测了返回字段（昵称、QQ号等）
- 这些信息应该在 responseExample 或文档中说明

✅ **正确示例**：

```json
{
  "name": "qq_group_memberList",
  "description": "QQ平台：获取群成员列表"
}
```

### 2. 数量预测型

❌ **错误示例**：

```json
{
  "name": "web_search",
  "description": "网络搜索，返回最多10条搜索结果"
}
```

**问题**：
- 预测了结果数量（10条）
- 数量是参数可控的，不应该在 description 中固定

✅ **正确示例**：

```json
{
  "name": "web_search",
  "description": "网络搜索，根据查询词检索相关网页信息"
}
```

### 3. 格式声明型

❌ **错误示例**：

```json
{
  "name": "api_call",
  "description": "调用API接口，返回JSON格式的响应数据"
}
```

**问题**：
- 声明了返回格式（JSON）
- 几乎所有工具都返回 JSON，这是默认行为

✅ **正确示例**：

```json
{
  "name": "api_call",
  "description": "调用指定的API接口，获取服务端数据"
}
```

---

## 推荐的编写结构

### 基础模板

```
[工具名] - [核心功能]。[支持的输入/输出类型]；[特殊说明]。
```

### 示例应用

**图片处理类**：
```
读取并描述图片内容。支持本地路径和在线链接；结合提示词进行识别。
```

**网络请求类**：
```
实时网络搜索。快速获取互联网上的最新信息，帮助验证和探索相关数据。
```

**QQ操作类**：
```
QQ平台：获取群成员列表。可用于统计群成员或查询特定成员信息。
```

**文件操作类**：
```
文件系统操作。支持读写文件、列出目录、创建删除等常用操作。
```

---

## meta 字段说明

如果需要说明结果的格式和示例，应该在 `meta` 字段中：

```json
{
  "name": "image_vision_read",
  "description": "读取并描述图片内容...",
  "meta": {
    "realWorldAction": "识别图像内容",
    "responseStyle": "纯文本",
    "responseExample": "图片中包含：一只猫在阳光下打盹..."
  }
}
```

**字段用途**：
- `realWorldAction`: 对用户的简短说明（日志展示）
- `responseStyle`: 返回数据的风格（纯文本/JSON/Markdown等）
- `responseExample`: 典型返回示例（帮助AI理解）

---

## 自检清单

编写工具 description 时，检查是否：

- [ ] 描述了工具的功能和用途
- [ ] 说明了支持的输入类型或格式
- [ ] 没有预测返回数据的结构
- [ ] 没有预测返回结果的数量
- [ ] 没有声明返回格式（如"返回JSON"）
- [ ] 简洁明了，不超过2-3句话
- [ ] 如需说明结果格式，放在 meta 字段中

---

## 对比总结

| 类型 | ❌ 错误 | ✅ 正确 |
|------|---------|---------|
| 图片识别 | "识别图片，返回详细描述和3个表情ID" | "读取并描述图片内容" |
| 网络搜索 | "搜索网页，返回10条包含标题、链接、摘要的结果" | "实时网络搜索，快速获取最新信息" |
| 文件读取 | "读取文件，返回UTF-8编码的文本内容" | "读取文件内容，支持多种编码" |
| 群成员列表 | "获取群成员列表，返回数组格式的成员信息" | "获取群成员列表" |

---

## 相关文档

- `docs/plan-reason-optimization.md` - Plan reason 字段优化
- 工具开发规范（TBD）
- API 设计最佳实践（TBD）

---

## 注意事项

1. **description 是给 AI 看的**：要帮助 AI 理解工具的用途，而非详细的技术规格
2. **避免冗余**：不要重复 schema 中已经明确的信息
3. **保持简洁**：2-3句话最佳，最多不超过5句
4. **使用主动语态**：如"读取文件"而非"文件被读取"
5. **多语言考虑**：如果工具面向国际用户，description 建议使用英文

---

## 优化建议

如果现有工具的 description 包含结果预测，建议按以下优先级优化：

1. **高优先级**：核心工具、常用工具
2. **中优先级**：有明显结果预测的工具
3. **低优先级**：description 已经比较合理的工具

优化时可以批量处理同类工具，保持风格一致性。
