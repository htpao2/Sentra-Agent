{
  "en": "PLANNING OUTPUT FIX (emit_plan)\n\nYour previous function-call output for `emit_plan` was INVALID.\nIt did NOT conform to the JSON schema for emit_plan or the Sentra XML Protocol for tool calls.\n\nSchema validation errors from the server (for your last emit_plan arguments):\n{{errors}}\n\nPrevious <sentra-tools> block from your last response (possibly truncated):\n{{previous_xml}}\n\nYou MUST now REGENERATE ONE AND ONLY ONE <sentra-tools> block with a valid:\n  <invoke name=\"emit_plan\">\nthat strictly follows BOTH:\n- the emit_plan JSON schema described in the earlier instructions, and\n- the Sentra XML Protocol for function calls (typed <parameter>, <array>, <object>, etc.).\n\nCRITICAL STRUCTURE REQUIREMENTS:\n1) The <invoke> node:\n   <sentra-tools>\n     <invoke name=\"emit_plan\">\n       ...\n     </invoke>\n   </sentra-tools>\n\n2) The overview parameter:\n   <parameter name=\"overview\"><string>...high level objective and strategy...</string></parameter>\n\n3) The steps parameter MUST be a typed array of step OBJECTS, NOT a string and NOT custom tags:\n   <parameter name=\"steps\">\n     <array>\n       <object>\n         <parameter name=\"aiName\"><string>VALID_AI_NAME</string></parameter>\n         <parameter name=\"reason\">\n           <array>\n             <string>short reason 1</string>\n             <string>short reason 2</string>\n           </array>\n         </parameter>\n         <parameter name=\"nextStep\"><string>how this step feeds into later steps</string></parameter>\n         <parameter name=\"draftArgs\">\n           <object>\n             <parameter name=\"REQUIRED_FIELD\"><string>value</string></parameter>\n             <!-- more required fields as needed -->\n           </object>\n         </parameter>\n         <!-- optional dependsOn -->\n         <parameter name=\"dependsOn\">\n           <array>\n             <number>0</number>\n             <number>1</number>\n           </array>\n         </parameter>\n       </object>\n       <!-- more step objects if needed -->\n     </array>\n   </parameter>\n\n4) You MUST NOT invent custom XML tags for the step structure. In particular, DO NOT use tags like:\n   - <item> ... </item>\n   - <key>aiName</key> / <key>reason</key> / <key>draftArgs</key>\n   - <aiName>...</aiName> without a surrounding <parameter name=\"aiName\"> wrapper\n   - <keywords> with nested <item> elements, etc.\n\n5) All tool arguments MUST be expressed using typed value nodes ONLY:\n   - <string>...</string> for strings (with proper XML escaping of <, >, &, \" and ').\n   - <number>...</number> for numeric values.\n   - <boolean>true|false</boolean> for booleans.\n   - <null></null> for null.\n   - <array>...</array> whose direct children are ONLY <string>, <number>, <boolean>, <null>, <array>, or <object>.\n   - <object>...</object> whose content consists ONLY of <parameter name=\"field\">VALUE</parameter> elements.\n\n6) aiName MUST be chosen from the allowed tool list given in the main planning instructions. Do NOT invent tool names.\n\nOUTPUT RULES:\n- Output ONLY the corrected <sentra-tools> block.\n- Do NOT output natural language explanations, markdown, or comments outside of the XML block.\n- Make sure the resulting emit_plan arguments would satisfy the JSON schema and the XML parser on the next attempt.\n"
}
