# web_parser 插件专用配置（优先于根目录 .env）
# 将本文件复制为 .env 并按需修改。

# 超时与长度
WEB_PARSER_TIMEOUT=70000                 # 单次请求/导航超时(ms)
WEB_PARSER_MAX_CONTENT_LENGTH=200000     # 最大正文长度(字符)
WEB_PARSER_MAX_RETRIES=2                 # Puppeteer 最大重试次数
WEB_PARSER_RETRY_DELAY=2000              # 每次重试的基础等待(ms)

# 渲染/选择器
WEB_PARSER_ENABLE_JAVASCRIPT=true        # 是否启用 Puppeteer 渲染；未安装 puppeteer 时会自动回退 axios
WEB_PARSER_WAIT_FOR_SELECTOR=            # 可选，等待该选择器后再提取内容（JS 渲染时有效）
WEB_PARSER_VIEWPORT_WIDTH=1366
WEB_PARSER_VIEWPORT_HEIGHT=768

# 高级等待/懒加载/提取（均为可选，默认更智能）
# 等待策略：auto | network_idle | scroll | dom_stable
WEB_PARSER_WAIT_STRATEGY=auto
# 最大等待总时长（ms），用于组合等待（网络空闲/滚动/DOM 稳定/选择器）
WEB_PARSER_MAX_TOTAL_WAIT=15000
# 网络空闲判定空档（ms）
WEB_PARSER_NETWORK_IDLE_IDLE_MS=800
# DOM 稳定采样间隔（ms）与所需的连续稳定采样次数
WEB_PARSER_DOM_STABLE_SAMPLE_MS=500
WEB_PARSER_DOM_STABLE_SAMPLES=4
# 滚动触发懒加载：步数/每步像素/步间延迟（ms）
WEB_PARSER_SCROLL_STEPS=6
WEB_PARSER_SCROLL_STEP_PX=1200
WEB_PARSER_SCROLL_DELAY_MS=250
# 加载中文案（逗号分隔或通过工具参数数组传入），若命中会追加一次滚动+稳定等待尝试
WEB_PARSER_LOADING_PATTERNS=loading,加载中,请稍候,正在加载,请稍后,please wait,正在编译,processing,spinner
# 文本质量阈值（字符数），过短则继续等待或回退 axios 再择优
WEB_PARSER_MIN_GOOD_LEN=400
# 请求拦截：按资源类型与 URL 片段拦截
WEB_PARSER_BLOCK_TYPES=image,font,media,stylesheet
WEB_PARSER_BLOCK_URL_PATTERNS=googletagmanager,analytics,tracking,ads
# 就绪表达式（可选），示例：window.__APP_READY__===true
WEB_PARSER_READY_EXPRESSION=

# UA 与代理
WEB_PARSER_USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 SentraWebParser/1.0.0"
# 可选：UA 平台（传给 Puppeteer setUserAgent 的 options.platform）示例：Windows / Android / iOS / Linux / macOS
WEB_PARSER_UA_PLATFORM=Windows
# 可选：UA 元数据（JSON 字符串，遵循 CDP Emulation.UserAgentMetadata 字段）
# 示例：{"platform":"Windows","mobile":false}
WEB_PARSER_UA_METADATA={"platform":"Windows","mobile":false}
WEB_PARSER_USE_PROXY=false
WEB_PARSER_PROXY_SERVER=

# 插件级别超时（优先于全局 TOOL_TIMEOUT_MS）
PLUGIN_TIMEOUT_MS=35000
