# FastAPI server
APP_HOST=127.0.0.1
APP_PORT=7200

# Inference device: auto|cpu|cuda
SENTRA_DEVICE=auto
# GPU selection (prefer this over index):
#   SENTRA_CUDA_SELECTOR supports:
#     - index=N     -> use specific CUDA index
#     - name=SUBSTR -> pick first GPU whose name contains SUBSTR (case-insensitive)
#     - first       -> use CUDA:0
#     - last        -> use last visible CUDA device
#     - max_mem     -> use GPU with maximum free memory
# Examples:
# SENTRA_CUDA_SELECTOR=max_mem
# SENTRA_CUDA_SELECTOR=name=RTX

# Backward compatibility: explicit index when SENTRA_DEVICE=cuda
SENTRA_CUDA_INDEX=0

# Sentiment model selection (folder under models/sentiment or absolute path)
SENTRA_SENTIMENT_MODEL=erlangshen

# Emotion model selection (folder name under models/emotion or absolute path)
SENTRA_EMOTION_MODEL=Chinese-Emotion-Small
# Multi-label inference config
EMO_MULTI_LABEL=true
EMO_THRESHOLD=0.35
EMO_TOPK=0
# Use label alias mapping (false = show raw model labels like LABEL_0, LABEL_1; true = use label_alias.json)
EMO_USE_ALIAS=true

# Sentiment neutral handling: auto|on|off (off -> only positive/negative)
SENTRA_SENTIMENT_NEUTRAL=auto

EMOTION_LABELS_FILE=app/vad_maps/default.json

# User tracking (per-user state & events)
# 数据存储目录（包含DuckDB数据库和用户状态文件）
USER_STORE_DIR=data
# 状态平滑（多时间尺度 EMA）
# 快速半衰期（秒），默认15分钟；旧变量 USER_EMA_HALF_LIFE_SEC 仍兼容
USER_STATE_FAST_HALFLIFE_SEC=900
# 慢速半衰期（秒），默认2小时；旧变量 USER_BASELINE_HALF_LIFE_SEC 仍兼容
USER_STATE_SLOW_HALFLIFE_SEC=7200
# 自适应增益：根据瞬时偏离度动态加速 fast EMA，默认2.0
USER_STATE_ADAPT_GAIN=2.0
# 保留的高频情绪标签数量（用于慢/快两套TopN）
USER_TOP_EMOTIONS=6

MBTI_CLASSIFIER=heuristic
MBTI_EXTERNAL_URL=
MBTI_IE_A_LOW=0.48
MBTI_IE_A_HIGH=0.58
MBTI_TF_POS_LOW=0.45
MBTI_TF_POS_HIGH=0.60
MBTI_POS_V_CUT=0.56
MBTI_NEG_V_CUT=0.44
MBTI_SN_VSTD_LOW=0.07
MBTI_SN_VSTD_HIGH=0.14
MBTI_JP_ASTD_LOW=0.07
MBTI_JP_ASTD_HIGH=0.14
MBTI_ANALYTICS_MAX_EVENTS=10000

# Visualization (可视化配置)
# 必须使用自定义字体（不再回退系统字体）
# 自定义字体路径（支持相对路径）示例：fonts/SourceHanSansSC-Regular.otf
# 如果不设置，程序会自动扫描 fonts/ 目录下的 .otf/.ttf/.ttc 并优先选择思源字体
# 注意：请确保字体文件存在且有效，可运行 "python check_fonts.py --custom" 验证
VISUAL_FONT_PATH=fonts/SourceHanSansSC-Regular.otf
