# NapCat WebSocket 地址（OneBot 11 / NapCat OneBot v11）
NAPCAT_WS_URL=ws://127.0.0.1:6700

# 连接模式（forward=正向，reverse=反向）
MODE=reverse

# NapCat/OneBot 实现使用的访问令牌（可选）
NAPCAT_ACCESS_TOKEN=

# 示例脚本使用的测试群号（可选）
TEST_GROUP_ID=

# 示例脚本使用的测试用户 QQ 号（可选）
TEST_USER_ID=

# 示例脚本中用于引用回复的消息 ID（可选）
TEST_REPLY_MSG_ID=

# 反向模式下连接成功后要私聊通知的主人 QQ 号（可选）
OWNER_QQ=

# 主人通知消息的自定义内容（可选）
OWNER_NOTIFY_TEXT=

# 日志级别（info | debug | warn | error | silent）
LOG_LEVEL=debug

# 事件摘要打印策略（always | debug | never）
EVENT_SUMMARY=always

# 是否使用 JSON 结构化日志（true | false）
JSON_LOG=false

# 日志中消息文本最大长度（0=不限制，默认80）
MESSAGE_TEXT_MAX_LENGTH=80

# 调用时是否自动等待 WS 连接就绪
AUTO_WAIT_OPEN=true

# 命令前缀（例如 !help）
COMMAND_PREFIX=!

# 是否启用自动重连 NapCat
RECONNECT=true

# 最小重连间隔（毫秒）
RECONNECT_MIN_MS=1000

# 最大重连间隔（毫秒）
RECONNECT_MAX_MS=15000

# 请求超时时间（毫秒）
REQUEST_TIMEOUT_MS=120000

# 最大并发请求数
RATE_MAX_CONCURRENCY=5

# 相邻请求的最小间隔时间（毫秒）
RATE_MIN_INTERVAL_MS=200

# 调用失败时的最大重试次数
RETRY_MAX_ATTEMPTS=0

# 第一次重试的延迟时间（毫秒）
RETRY_INITIAL_DELAY_MS=500

# 重试退避系数（指数退避）
RETRY_BACKOFF_FACTOR=2

# 重试抖动范围（毫秒）
RETRY_JITTER_MS=200

# 是否对消息事件做去重
DEDUP_EVENTS=true

# 事件去重缓存过期时间（毫秒）
DEDUP_TTL_MS=120000

# 群白名单（逗号分隔，空表示所有群均允许）
WHITELIST_GROUPS=

# 用户白名单（逗号分隔，空表示所有用户均允许）
WHITELIST_USERS=

# 对非白名单消息是否记录日志（true=记录并忽略，false=静默丢弃）
LOG_FILTERED=false

# 反向 WebSocket 监听端口（NapCat 将连接到此端口）
REVERSE_PORT=6701

# 反向 WebSocket 路径
REVERSE_PATH=/onebot

# 是否启用测试插件（用于开发调试，命令以 # 开头）
ENABLE_TEST_PLUGIN=false

# 是否启用消息流服务（WebSocket 实时消息推送）
ENABLE_STREAM=true

# 消息流服务监听端口
STREAM_PORT=6702

# 是否在推送中包含原始事件数据（调试用，会增加数据量）
STREAM_INCLUDE_RAW=false

# 是否启用 AI 自动回复功能
ENABLE_AI=false

# AI API 基础地址（OpenAI 兼容）
AI_API_URL=https://yuanplus.chat/v1

# AI API 密钥
AI_API_KEY=

# AI 模型名称
AI_MODEL=gpt-4o

# 温度参数 (0.0-2.0，越高越随机，越低越稳定)
AI_TEMPERATURE=0.7

# AI 回复的最大 tokens 数
AI_MAX_TOKENS=2000

# 系统提示词（为空则使用默认）
AI_SYSTEM_PROMPT=

# AI 回复延迟（毫秒），用于模拟打字效果
AI_REPLY_DELAY=1000

# 是否在 summary 中包含消息 ID（便于引用回复）
STREAM_INCLUDE_MESSAGE_ID=true

# 是否跳过动画表情图片消息（summary 为 "[动画表情]" 的纯图片）
STREAM_SKIP_ANIMATED_EMOJI=true

# 消息流 RPC 调用 NapCat 失败时是否自动重试
STREAM_RPC_RETRY_ENABLED=true

# RPC 重试间隔（毫秒，默认 10000）
STREAM_RPC_RETRY_INTERVAL_MS=10000

# RPC 最大重试次数（默认 60 次）
STREAM_RPC_RETRY_MAX_ATTEMPTS=60